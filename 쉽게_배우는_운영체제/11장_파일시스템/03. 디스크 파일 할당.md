# 03. 디스크 파일 할당

`디스크 파일 할당`

**일반적으로 하나의 파일은 여러 개의 블록을 사용하는데, 여러 개의 블록을 어떻게 연결하는지에 따라** **연속 할당**과 **불연속 할당** 방식으로 구분된다.

- **연속 할당**
- **불연속 할당**

`연속 할당`

**파일을 구성하는 데이터를 디스크 상에 연속으로 배열하는 간단한 방식**이다. 그렇지만 디스크에 남은 공간 중 파일의 크기와 맞는 연속된 공간이 없을 때는 연속 할당이 불가능하다.

`불연속 할당`

**비어 있는 블록에 데이터를 분산하여 저장하고 이에 관한 정보를 파일 시스템이 관리하는 방식**이다.

대표적인 불연속 할당 방식으로는 연결 리스트를 이용한 **연결 할당**과 **인덱스**를 이용한 인덱스 할당이 있다.

- **연결 할당**
  - 파일에 속한 데이터를 연결 리스트로 관리하는 방식으로 체인 할당이라고도 한다.
  - 테이블 형태로 관리 (FAT)
  - 파일 테이블에는 시작 블록에 대한 정보만 저장
- **인덱스 할당**
  - FAT의 최대 할당 크기 제한의 문제를 해결하기 위해 인덱스 할당 방식 사용
  - 데이터의 인덱스를 담고 있는 인덱스 블록을 연결
  - 인덱스 블록은 실제 데이터의 위치에 관한 정보를 순서대로 보관

`디스크의 빈 공간 정리`

디스크 블록의 크기에 따라 낭비되는 공간이 생길 수도 있다.

낭비되는 공간을 내부 단편화라 하는데 내부 단편화 때문에 실제 전체 파일 크기보다 디스크에 할당된 파일의 크기가 더 커진다.

이러한 현상을 해결하기 위해 **빈 블록의 정보만 모아놓은 빈 공간 리스트를 사용해 빈 공간을 최소화한다.**
