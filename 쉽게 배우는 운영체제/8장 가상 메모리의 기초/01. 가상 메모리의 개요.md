# 01. 가상 메모리의 개요

### 1. 가상 메모리 시스템

`가상 메모리의 개념`

- 등장 배경
  - 컴퓨터마다 메모리의 크기가 다르기 때문에, 다른 메모리의 크기에 따라 가변적인 프로그램 실행이 가능해야 한다.
- 특징
  - 물리 메모리의 크기를 신경쓰지 않고, 프로그래밍이 가능하게 만든다.
  - 물리 메모리의 크기와 상관없이 프로세스에 커다란 메모리 공간을 제공하는 기술
- 가상 메모리가 물리 메모리의 크기를 넘어 무한대로 메모리의 영역을 사용할 수 있게한다.

→ 이는 스왑이 실현 가능하게 해준다.

`가상 메모리의 크기와 주소`

가상 메모리는 프로세스가 바라보는 메모리 영역, 메모리 관리자가 바라보는 메모리 영역으로 나뉜다.

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/97b0a30a-7067-4d35-bb63-7f2fabc35aa6/799ddd53-25e1-4849-bb70-66328a4b2c07/Untitled.png)

`가상 메모리가 물리 메모리의 한계를 넘을 수 있는 이유`

- CPU 비트에 따라 가용 가능한 메모리의 크기가 정해진다.
- 32Bit CPU의 경우, 2^32-1크기인 최대 4GB까지 메모리 사용이 가능하다.
- 4GB의 주소 공간을 차지하는 프로세스를 동시에 10개를 돌리려면 메모리 40GB가 필요한데, 부족한 메모리 영역을 스왑을 통해 구현한다.
- 가상 메모리 시스템은 물리 메모리와 스왑 영역을 합쳐 프로세스가 사용하는 가상 주소를 실제 메모리의 물리 주소로 변환한다.
- 메모리 관리자는 물리 메모리를 어떻게 나눌지, 사용자 프로세스의 배치, 부족한 물리 메모리의 처리 등을 담당한다.

→ 가상 메모리의 크기는 물리 메모리 + 스왑 영역을 합친 크기

---

### 2. 매핑 테이블의 필요성과 역할

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/97b0a30a-7067-4d35-bb63-7f2fabc35aa6/0db65299-7f29-45f5-8780-e1a9fd68a73a/Untitled.png)

`가상 메모리의 매핑 테이블`

- 가상 메모리 시스템에서 가상 주소는 물리 메모리 or 스왑 영역 중 한 곳을 가리킨다.
- 매핑 테이블
  - 메모리 관리자는 가상 주소와 물리 주소를 일대일로 매핑한 테이블로 관리함.
  - 가상 주소를 통해, 실제 메모리 또는 스왑 영역의 데이터를 사용하여 관리함.
- `페이지 매핑 테이블`
  - 가상 메모리에서도 마찬가지로, 가변 분할 방식과 고정 분할 방식으로 메모리를 할당한다.
  - 고정 분할 기법을 통해 나뉜 매핑 테이블을 페이지 매핑 테이블이라 한다.
- `세그먼테이션 매핑 테이블`
  - 가변 분할 방식(세그먼테이션 기범)에서 사용하는 매핑 테이블을 세그먼테이션 매핑 테이블이라고 한다.

### 3. 지역성

- 정의
  - 기억장치에 접근하는 패턴이 메모리 전체에 고루 분포되는 것이 아닌 특정 영역에 집중되는 성질
- 공간 지역성
  - 현재 위치에서 가까운 데이터에 접근할 확률이 더 높다.
- 시간 지역성
  - 현재를 기준으로 가장 가까운 시간에 접근한 데이터에 접근할 확률이 더 높다.
- 순차적 지역성
  - 일반적인 프로그래밍은 순차적으로 진행 된다.
- 지역성의 활용
  - 캐시
    - 현재 코드의 5행을 실행할 때, 비교적 5행과 가까운 코드를 다음에 실행할 확률이 높다.
    - 이를 캐시에 저장하여 캐시 적중률을 높인다.
  - 페이지 교체 알고리즘
    - 메모리가 꽉 차 특정 페이지를 스왑으로 내보내야 할 때, 비교적 덜 사용할 가능성이 높은 페이지를 스왑 영역으로 보내야 효율이 높아질 것이다.
