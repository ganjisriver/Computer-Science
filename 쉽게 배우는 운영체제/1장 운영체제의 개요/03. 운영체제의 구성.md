**커널과 인터페이스**

- 운영체제는 커널과 인터페이스로 구성되어 있다.

`커널`

- 프로세스 관리, 메모리 관리, 저장 장치 관리 등과 같은 운영체제의 핵심 기능을 구현한 프로그램이다.
- 자동차로 비유하면, 커널은 엔진이다. 다양한 종류의 자동차가 있지만, 엔진의 기능에 따라 성능을 좌우할 수 있다. 마찬가지로, 커널의 성능에 따라 운영체제의 성능이 좌우된다고 볼 수 있다.

`인터페이스`

- 사용자의 응용 프로그램에 인접하여 커널에 명령을 전달하고, 결과를 받아오는 프로그램이다.

![Untitled](../1장%20운영체제의%20개요/assets/1-3-1%20인터페이스%20구조.png)

운영체제는 크게 유닉스 계열 커널과 윈도우 계열 컬로 나뉜다.

과거 대형 컴퓨터에서 사용하던 유닉스 커널은 빠르고 안정적으로 작동하는 운영체제인 반면, 사용자 인터페이스는 보잘 것 없다. 명령을 내리는 것도, 사용자가 키보드를 통해 명령어를 직접 입력해야 했다.

- ex) Windows Powershell, cmd와 같은 인터페이스 / cd .. , ls -a 와 같은 명령어를 통해 사용자와 상호작용이 가능함.

반면 Windows 계열은 마우스 클릭만으로 특정 디렉토리로 들어가거나, 프로그램을 삭제, 편집, 생성 등을 할 수 있다.

1. **시스템 호출과 디바이스 드라이버**

`시스템 호출`

- 시스템 호출은 커널이 제공하는 시스템 관련 서비스를 모아 놓은 것이 함수 형태로 제공된다.
- 위에 나온 그림을 보면 커널 내부에 시스템 호출과 드라이버가 있다.
- 커널은 컴퓨터 자원을 보호하기 위해 사용자나 응용 프로그램이 직접 자원에 접근하는 것을 차단하기 때문에, 호출이라는 인터페이스를 통해 접근해야 한다.
- 특정 응용프로그램 두 개가 각각 14와 21이라는 숫자를 저장한다고 가정한다.
- `직접 접근`
  - 두 응용 프로그램이 직접 데이터를 저장한다. 이 과정에서, 다른 프로그램이 해당 데이터를 지우거나, 변경할 우려가 있다.
- `시스템 호출을 통한 접근`
  - 응용 프로그램이 하드디스크에 직접 데이터를 저장하지 않고, 커널에서 제공하는 write() 함수를 사용하여 데이터를 저장해 달라고 요청한다. 응용 프로그램은 데이터가 저장된 위치를 모르고, 데이터를 읽고 싶을 때, read()라는 함수를 통해 호출한다.
  - 이 경우에 데이터의 읽고, 쓰기를 커널에 위임하기 떄문에, 일관성있게 컴퓨터 자원을 관리할 수 있게 된다.
- 시스템 호출은 커널이 제공하는 시스템 자원을 사용하기 위한 함수다.

시스템 호출과 유사한 용어로 응용 프로그램 인터페이스(API Application Programming Interface)와 시스템 개발자용 키트(SDK System Developer’s Kit)가 있다.

`응용 프로그램 인터페이스(API)`

- 응용 프로그램이 자신과 연관된 프로그램을 개발할 수 있도록 제공하는 인터페이스다.
- 예로, 구글 맵을 이용해 배달 서비스나 길 찾기 서비스를 개발하려는 개발자들을 위해서, 구글은 다양한 함수를 제공하는데, 이 함수 집합이 인터페이스다. 운영체제에서 제공하는 함수를 이용해 응용 프로그램을 만든다는 것이 운영체제에서 제공하는 API, 시스템 호출을 사용한다는 것이다.

`시스템 개발자용 키트(SDK)`

- 프로그램 개발자를 위해 API 및 매뉴얼, 프로그램 개발에 필요한 코드 편집기, 에뮬레티어 같은 개발용 응용 프로그램까지 하나로 묶어서 배포하는 개발 툴이다.
- 윈도우용 SDK VIsual Studio, 안드로이드용 SDK 안드로이드 스튜디오 등이 대표적인 예다.

`디바이스 드라이버`

- 커널과 하드웨어의 인터페이스를 디바이스 드라이버라고 한다.
- 현대 운영체제에서 커널은 주변 장치와 데이터를 주고 받는 표준 방식을 정하고 있다. 그렇기에, 표준 방식을 따르는 주변 장치는 꽂기만 하면 드라이버 설치 없이 바로 사용이 가능하다. 유저의 편의성 및 추가 기능을 제공하기 위해서 추가 디바이스 드라이버를 설치해야 하는 경우도 있다.
1. `커널의 역할과 종류`
- 커널의 역할은 다양한 종류의 프로세스에 CPU를 배분하고, 작업할 수 있는 환경을 만드는 것이다. 이를 **프로세스 관리**라고 한다.
- 커널은 여러 개의 프로세스를 메모리에 배치하는 일을 한다. 또한, 저장장치에 필요한 파일 시스템을 만들고 관리하는 일을 한다.
- 입출력 장치로부터 발생하는 입출력을 처리하는 것도 커널이 한다.

| 핵심기능         | 설명                                       |
| ------------ | ---------------------------------------- |
| 프로세스 관리      | 프로세스에 CPU를 배분하고 작업에 필요한 제반 환경을 제공한다.     |
| 메모리 관리       | 프로세스에 작업 공간을 배치하고 실제 메모리보다 큰 가상공간을 제공한다. |
| 파일 시스템 관리    | 데이터를 저장하고 접근할 수 있는 인터페이스를 제공한다.          |
| 입출력 관리       | 필요한 입력과 출력 서비스를 제공한다.                    |
| 프로세스 간 통신 관리 | 공동 작업을 위한 프로세스 간 통신 환경을 지원한다.            |

이러한 커널의 역할을 어떻게 구현하는 지에 따라 단일형 구조 커널, 계층형 구조 커널, 마이크로 구조 커널로 구분된다.

`단일형 구조 커널`

- 초창기 운영체제의 구조로, 커널의 핵심 기능을 구현하는 모듈의 구분 없이 하나로 구성되어있다.
- 이에 해당하는 운영체제가 MS-DOS, VMS, 초기 유닉스 운영체제다.
- 장점
  - 모듈의 분산이 일어나지 않았기 때문에, 모듈 간 통신 비용이 줄어 들어 효율적이다.
- 단점
  - 모든 모듈이 하나로 묶여 있어서, 버그나 오류를 처리하기 힘들다.
  - 운영체제의 여러 기능이 서로 연결되어 있어서 기능 상의 작은 오류가 시스템 전체로 이어진다.
  - 다양한 환경의 시스템에 적용하기 어렵다.(확장성이 부족함.)
  - 현대의 운영체제는 매우 크고 복잡하여 완전한 단일형 구조의 운영체제를 구현하기 힘들다.

`계층형 구조 커널`

- 단일형 구조 커널에서 발전된 형태로, 비슷한 기능을 묶어서, 계층 간의 통신을 통해 운영체제를 구현하는 방식이다.
- 비슷한 기능을 모아 모듈화했기 때문에, 단일형 구조보다 버그나 오류를 쉽게 처리할 수 있다.
- 오늘날의 운영체제가 대부분 이러한 구조로 이루어져있다.

![Untitled](../1장%20운영체제의%20개요/assets/1-3-2%20계층형%20커널.png)

`마이크로 구조 커널`

- 계층형 구조 커널은 다양한 하드웨어와 사용자의 요구를 수행하기 위해 계층과 기능을 추가한 형태다.
- 이러한 요구 사항을 충족하기 위해 커널의 크기가 커지고, 필요한 하드웨어 용량도 늘어났다. 또한, 커널의 소스가 방대해져 오류를 잡기 힘들어졌다.
- 마이크로 구조 커널은 프로세스 관리, 메모리 관리, 프로세스 간 통신 관리 등 아주 기초적인 기능만 제공한다.
- 대신 기존에 제공하던 많은 부분이 사용자 영역에 구현되어 있다.
- 마이크로 구조 커널에서 각 모듈은 독립적으로 작동하여 하나의 모듈이 실패하더라도, 다운되지 않는다.
1. **가상머신**
- C 언어에서 어셈블리어 같은 저급기능이 있어 시스템 프로그래밍 언어로 적합하다.
- C언어로 유닉스 운영체제를 만들었지만, 윈도우처럼 유닉스와 다른 커널을 가진 운영체제와의 호환성이 떨어짐. 심지어, 다른 버전의 유닉스 운영체제와도 호환이 안되는 경우가 발생한다.
- 이러한 호환성 문제를 잡기 위해 등장한 언어가 java다. 대부분의 운영체제에서 작동하며, 이것이 가능하게 한 원리가 운영체제 위에 가상머신을 만들고 그 위에서 응용 프로그램이 작동하게 만든 것이다.
- 다양한 운영체제에서 작동하게 해주어 호환성을 높이는 가상머신은 특정 운영체제에서 응용프로그램이 가상머신을 거쳐야지만 동작을 하게 하는 경우가 생겨, 속도가 느려진다는 단점이 있다.
