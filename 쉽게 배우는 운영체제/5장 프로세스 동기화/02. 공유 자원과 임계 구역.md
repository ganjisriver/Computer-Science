# 02. 공유 자원과 임계 구역

### 1. 공유 자원에 대한 접근

`공유자원`

- 프로세스가 공동으로 이용하는 변수, 메모리, 파일 등을 의미
- 공유 자원에 대한 접근 순서에 따라 그 결과가 달라질 수 있다.
- 프로세스들이 공유 자원 접근 순서를 정하여 예상하지 못한 문제가 발생하지 않도록 방지해야한다.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e9dc99f6-20de-4df3-a780-d6b4e0a0d001/Untitled.png)

위 그림에서 정상적은 예금 저장은 25만원 이지만, 순서를 제대로 통제하지 않는다면, 위와 같이 결과가 예상한 결과대로 나오지 않는 문제가 발생한다.

→ 이처럼 2개 이상의 프로세스가 공유 자원을 병행해서 읽거나 쓰는 상황을 **경쟁 조건**이 발생했다고 한다.

### 2. 임계구역

`임계구역`

- 공유 자원 접근 순서에 따라 실행 결과가 달라지는 프로그램 영역을 **임계 영역**이라고 한다.
- 임계 구역에서는 프로세스가 동시에 작업하면 안되고, 순차적으로 작업해야 한다.

### 3. 생산자 - 소비자 문제

- 임계 구역과 관련된 전통적인 문제로 생산자 - 소비자 문제가 있다.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7408550c-5fb9-4534-94d9-025b01241b58/Untitled.png)

- `sum=3` 일 때 동시 접근이 가능하게 되면
  - producer의 `sum+1`, customer의 `sum-1`이 실행 순서에 따라 랜덤으로 출력되어버림
- 하드웨어 자원의 경우에도 문제가 일어날 수 있음

### 4. 임계구역 문제 해결 조건

- 상호 배제(mutual exclusion)
  - 한 프로세스가 임계구역에 들어가면, 다른 프로세스는 임계 구역에 접근할 수 없다.
- 한정 대기(bounded waiting)
  - 한 프로세스가 계속 임계 구역을 차지하는 상태를 막기 위해서 점유 시간이 한정되어야 한다.
  - 어떤 프로세스도 임계 구역에 진입하지 못하여 무한 대기하지 않아야 한다.
- 진행의 융통성
  - 한 프로세스가 다른 프로세스의 진행을 방해해서는 안된다.
